<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CRM Mobile Editable</title>

<link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body{
  font-family:"Prompt",sans-serif;
  background:#f6fbf9;
  margin:0;
  padding:20px;
}
h2,h3{margin-bottom:10px}

/* ===== Dashboard ===== */
.dashboard{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(150px,1fr));
  gap:12px;
  margin-bottom:20px;
}
.card{
  background:#fff;
  padding:14px;
  border-radius:10px;
  text-align:center;
}
.card span{font-size:26px;font-weight:600}
.green{background:#e6f7ee}
.yellow{background:#fff8d6}
.orange{background:#ffe3c2}
.red{background:#ffd6d6}

/* ===== Form ===== */
.form-box{
  background:#fff;
  padding:16px;
  border-radius:12px;
  margin-bottom:20px;
}

/* ===== Form Grid ===== */
.form-grid{
  display:grid;
  grid-template-columns:1.2fr 1.5fr 1fr 1fr 1fr 2fr;
  gap:12px;
  align-items:stretch;
}

/* ===== Input with Icon ===== */
.input-group{
  position:relative;
}
.input-group i{
  position:absolute;
  left:12px;
  top:50%;
  transform:translateY(-50%);
  color:#999;
}
.input-group input,
.input-group textarea{
  width:100%;
  height:44px;
  padding:10px 12px 10px 36px;
  border-radius:8px;
  border:1px solid #ccc;
  font-family:"Prompt",sans-serif;
  font-size:14px;
  box-sizing:border-box;
}
.input-group textarea{
  height:80px;
  resize:vertical;
}

/* ===== Table ===== */
table{
  width:100%;
  border-collapse:collapse;
  background:#fff
}
th,td{
  padding:10px;
  border:1px solid #ddd;
  vertical-align:top;
}
th{background:#eef7f4}

/* ‚≠ê ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç: ‡πÉ‡∏´‡πâ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà ‚≠ê */
td:nth-child(8){
  white-space:pre-line;
}

/* ===== Follow Colors ===== */
.follow-green{background:#e6f7ee}
.follow-yellow{background:#fff8d6}
.follow-orange{background:#ffe3c2}
.follow-red{background:#ffd6d6}

/* ===== Mobile ===== */
.mobile-list{display:none}
@media(max-width:768px){
  .form-grid{grid-template-columns:1fr}
  table{display:none}
  .dashboard{grid-template-columns:repeat(2,1fr)}
  .mobile-list{
    display:flex;
    flex-direction:column;
    gap:12px
  }
  .mobile-card{
    background:#fff;
    padding:14px;
    border-radius:12px
  }
  .row{
    display:flex;
    justify-content:space-between;
    font-size:14px;
    margin-bottom:6px
  }
  /* ‚≠ê Mobile ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡∏•‡∏≤‡∏¢‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î ‚≠ê */
  .row span{
    white-space:pre-line;
    text-align:right;
  }
}
</style>
</head>

<body>

<h2>üìä CRM ‡∏£‡∏∞‡∏ö‡∏ö‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h2>

<div class="dashboard">
  <div class="card green">üü¢ ‡∏õ‡∏Å‡∏ï‡∏¥<br><span id="dGreen">0</span></div>
  <div class="card yellow">üü° ‡∏Ñ‡∏ß‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°<br><span id="dYellow">0</span></div>
  <div class="card orange">üü† ‡πÄ‡∏£‡πà‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°<br><span id="dOrange">0</span></div>
  <div class="card red">üî¥ ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á<br><span id="dRed">0</span></div>
</div>

<div class="form-box">
<h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏° / ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏Å‡∏≤‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°</h3>

<div class="form-grid">
  <div class="input-group">
    <input type="date" id="fDate">
    <i class="fa-solid fa-calendar-days"></i>
  </div>
  <div class="input-group">
    <input type="text" id="fName" placeholder="‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•">
    <i class="fa-solid fa-hospital"></i>
  </div>
  <div class="input-group">
    <input type="text" id="fContact" placeholder="‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠">
    <i class="fa-solid fa-user"></i>
  </div>
  <div class="input-group">
    <input type="text" id="fDepartment" placeholder="‡πÅ‡∏ú‡∏ô‡∏Å">
    <i class="fa-solid fa-sitemap"></i>
  </div>
  <div class="input-group">
    <input type="text" id="fProvince" placeholder="‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î">
    <i class="fa-solid fa-location-dot"></i>
  </div>
  <div class="input-group">
    <textarea id="fNote" placeholder="‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î (‡∏Ç‡∏∂‡πâ‡∏ô‡∏ö‡∏£‡∏£‡∏ó‡∏±‡∏î‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ)"></textarea>
    <i class="fa-solid fa-clipboard"></i>
  </div>
</div>
<br>
<button onclick="saveEntry()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
</div>

<table id="crmTable">
<thead>
<tr>
  <th>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</th>
  <th>‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</th>
  <th>‡∏ú‡∏π‡πâ‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠</th>
  <th>‡πÅ‡∏ú‡∏ô‡∏Å</th>
  <th>‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î</th>
  <th>‡∏ß‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ</th>
  <th>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞</th>
  <th>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</th>
</tr>
</thead>
<tbody></tbody>
</table>

<div id="mobileList" class="mobile-list"></div>

<script>
let entries=[];

function daysSince(d){
  return Math.floor((new Date()-new Date(d))/(86400000));
}
function followClass(days){
  return days<=7?"follow-green":days<=14?"follow-yellow":days<=21?"follow-orange":"follow-red";
}
function followText(days){
  return days<=7?"‡∏õ‡∏Å‡∏ï‡∏¥":days<=14?"‡∏Ñ‡∏ß‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°":days<=21?"‡πÄ‡∏£‡πà‡∏á‡∏ï‡∏¥‡∏î‡∏ï‡∏≤‡∏°":"‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏™‡∏π‡∏á";
}

function saveEntry(){
  const data={
    date:fDate.value,
    name:fName.value,
    contact:fContact.value,
    dept:fDepartment.value,
    province:fProvince.value,
    note:fNote.value
  };
  entries.push(data);
  render();
  fDate.value=fName.value=fContact.value=fDepartment.value=fProvince.value=fNote.value="";
}

function render(){
  const tb=document.querySelector("#crmTable tbody");
  const mobile=document.getElementById("mobileList");
  tb.innerHTML="";
  mobile.innerHTML="";
  let g=y=o=r=0;

  entries.forEach(e=>{
    const days=daysSince(e.date);
    const cls=followClass(days);
    if(cls==="follow-green")g++; else if(cls==="follow-yellow")y++; else if(cls==="follow-orange")o++; else r++;

    tb.innerHTML+=`
    <tr class="${cls}">
      <td>${e.date}</td>
      <td>${e.name}</td>
      <td>${e.contact}</td>
      <td>${e.dept}</td>
      <td>${e.province}</td>
      <td align="center">${days}</td>
      <td>${followText(days)}</td>
      <td>${e.note}</td>
    </tr>`;

    mobile.innerHTML+=`
    <div class="mobile-card ${cls}">
      <div class="row"><b>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà</b><span>${e.date}</span></div>
      <div class="row"><b>‡πÇ‡∏£‡∏á‡∏û‡∏¢‡∏≤‡∏ö‡∏≤‡∏•</b><span>${e.name}</span></div>
      <div class="row"><b>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</b><span>${e.note}</span></div>
    </div>`;
  });

  dGreen.textContent=g;
  dYellow.textContent=y;
  dOrange.textContent=o;
  dRed.textContent=r;
}
</script>

</body>
</html>
